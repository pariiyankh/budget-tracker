<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budget-Tracker</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <header>
        <nav class="navbar navbar-expand-md bg-body py-3">
            <div class="container"><a class="navbar-brand d-flex align-items-center" href=""><img
                        src="Untitled design.png" /></a></div>
        </nav>
    </header>
    <div id="heading" class="container">
        <h1><i class="fas fa-wallet icon"></i>Budget-Tracker</h1>
    </div>
    <form id="transaction-form">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="date"><i class="far fa-calendar icon"></i>Datum:</label>
                        <input type="date" id="date" required>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="description"><i class="fas fa-comment icon"></i>Beschreibung:</label>
                        <input type="text" id="description" required>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="amount"><i class="fas fa-euro-sign icon"></i>Betrag (€):</label>
                        <input type="number" id="amount" step="0.01" required>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="type"><i class="fas fa-exchange-alt icon"></i>Typ:</label>
                        <select id="type">
                            <option value="income">Einnahme</option>
                            <option value="expense">Ausgabe</option>
                        </select>
                    </div>
                </div>
            </div>
            <button type="submit"><i class="fas fa-plus icon"></i>Hinzufügen</button>
        </div>
    </form>
    </div>
    <div class="container" style="text-align: center;">
        <div class="row">
            <div class="col-md-4">
                <h3><i class="fas fa-arrow-up icon"></i>Einnahmen</h3>
                <p id="total-income">€0.00</p>
            </div>
            <div class="col-md-4">
                <h3><i class="fas fa-arrow-down icon"></i>Ausgaben</h3>
                <p id="total-expenses">€0.00</p>
            </div>
            <div class="col-md-4">
                <h3><i class="fas fa-balance-scale icon"></i>Bilanz</h3>
                <p id="balance">€0.00</p>
            </div>
        </div>
    </div>
    <div class="container">
        <div class="transactions">
            <h2><i class="fas fa-list icon"></i>Transaktionen</h2>
            <div class="form-group">
                <label for="filter"><i class="fas fa-filter icon"></i>Filter:</label>
                <select id="filter" class="form-control">
                    <option value="all">Alle</option>
                    <option value="income">Nur Einnahmen</option>
                    <option value="expense">Nur Ausgaben</option>
                </select>
            </div>
            <div id="transaction-list"></div>
        </div>
    </div>
    
    <script>// Initialize transactions array
        let transactions = [];
        let currentFilter = 'all';
        
        // Function to update date and time
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' };
            const dateTimeString = now.toLocaleDateString('de-DE', options);
            
            // Create or update the datetime element
            let datetimeEl = document.getElementById('datetime');
            if (!datetimeEl) {
                datetimeEl = document.createElement('p');
                datetimeEl.id = 'datetime';
                document.getElementById('heading').appendChild(datetimeEl);
            }
            datetimeEl.textContent = dateTimeString;
        }
        
        // Function to save transactions to localStorage
        function saveTransactions() {
            localStorage.setItem('budgetTrackerTransactions', JSON.stringify(transactions));
        }
        
        // Function to load transactions from localStorage
        function loadTransactions() {
            const savedTransactions = localStorage.getItem('budgetTrackerTransactions');
            if (savedTransactions) {
                transactions = JSON.parse(savedTransactions);
                updateUI();
            }
        }
        
        // Function to update UI
        function updateUI() {
            const transactionList = document.getElementById('transaction-list');
            const totalIncome = document.getElementById('total-income');
            const totalExpenses = document.getElementById('total-expenses');
            const balance = document.getElementById('balance');
        
            transactionList.innerHTML = '';
            let incomeSum = 0;
            let expensesSum = 0;
        
            const filteredTransactions = transactions.filter(transaction => {
                if (currentFilter === 'all') return true;
                return transaction.type === currentFilter;
            });
        
            filteredTransactions.forEach(function(transaction) {
                const transactionEl = document.createElement('div');
                transactionEl.classList.add('transaction-item', 'row', 'mb-2', 'p-2', 'bg-light', 'rounded');
        
                const detailsEl = document.createElement('div');
                detailsEl.classList.add('col-md-6', 'transaction-details');
        
                const dateEl = document.createElement('span');
                dateEl.textContent = new Date(transaction.date).toLocaleDateString('de-DE');
                dateEl.classList.add('transaction-date', 'text-muted');
        
                const descriptionEl = document.createElement('span');
                descriptionEl.innerHTML = `<i class="fas ${transaction.type === 'income' ? 'fa-arrow-up text-success' : 'fa-arrow-down text-danger'} icon"></i>${transaction.description}`;
        
                detailsEl.appendChild(dateEl);
                detailsEl.appendChild(descriptionEl);
        
                const amountEl = document.createElement('div');
                amountEl.classList.add('col-md-4', 'text-right');
                amountEl.textContent = `€${transaction.amount.toFixed(2)}`;
                amountEl.classList.add(transaction.type === 'income' ? 'text-success' : 'text-danger');
        
                const deleteBtn = document.createElement('button');
                deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                deleteBtn.classList.add('btn', 'btn-sm', 'btn-outline-danger', 'col-md-2');
                deleteBtn.addEventListener('click', function() {
                    transactions = transactions.filter(t => t.id !== transaction.id);
                    saveTransactions();
                    updateUI();
                });
        
                transactionEl.appendChild(detailsEl);
                transactionEl.appendChild(amountEl);
                transactionEl.appendChild(deleteBtn);
                transactionList.appendChild(transactionEl);
        
                if (transaction.type === 'income') {
                    incomeSum += transaction.amount;
                } else {
                    expensesSum += transaction.amount;
                }
            });
        
            totalIncome.textContent = `€${incomeSum.toFixed(2)}`;
            totalExpenses.textContent = `€${expensesSum.toFixed(2)}`;
            balance.textContent = `€${(incomeSum - expensesSum).toFixed(2)}`;
        }
        
        // Event listener for form submission
        document.getElementById('transaction-form').addEventListener('submit', function(e) {
            e.preventDefault();
        
            const date = document.getElementById('date').value;
            const description = document.getElementById('description').value;
            const amount = parseFloat(document.getElementById('amount').value);
            const type = document.getElementById('type').value;
        
            if (date && description && amount) {
                const transaction = {
                    id: Date.now(),
                    date: date,
                    description: description,
                    amount: amount,
                    type: type
                };
        
                transactions.push(transaction);
                saveTransactions();
                updateUI();
                this.reset();
            }
        });
        
        // Event listener for filter change
        document.getElementById('filter').addEventListener('change', function(e) {
            currentFilter = e.target.value;
            updateUI();
        });
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            updateDateTime();
            setInterval(updateDateTime, 1000); // Update every second
            loadTransactions();
        });
        </script>
</body>

</html>
